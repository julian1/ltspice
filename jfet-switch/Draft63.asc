Version 4
SHEET 1 2756 1020
WIRE -576 -96 -656 -96
WIRE -656 -80 -656 -96
WIRE -576 -80 -576 -96
WIRE -432 64 -544 64
WIRE -208 64 -432 64
WIRE 80 64 -128 64
WIRE 192 64 80 64
WIRE 544 64 288 64
WIRE 656 64 544 64
WIRE 880 64 736 64
WIRE -240 80 -336 80
WIRE -336 128 -336 80
WIRE -320 128 -336 128
WIRE -240 144 -240 80
WIRE -240 144 -256 144
WIRE -208 144 -240 144
WIRE 448 144 -128 144
WIRE 544 144 544 64
WIRE 736 144 736 64
WIRE -432 160 -432 64
WIRE -320 160 -432 160
WIRE 80 160 80 64
WIRE 224 192 224 112
WIRE 480 224 480 192
WIRE 736 256 736 208
WIRE 480 304 80 304
WIRE 80 384 80 304
WIRE 96 384 80 384
WIRE 224 384 224 272
WIRE 224 384 208 384
WIRE 336 496 336 384
FLAG -544 144 0
FLAG 336 576 0
FLAG -432 64 SIG
FLAG 736 256 0
FLAG -576 -80 0
FLAG -656 -176 VCC
FLAG -656 0 VEE
FLAG -288 112 VCC
FLAG -288 176 VEE
SYMBOL res -112 48 R90
WINDOW 0 -63 67 VBottom 2
WINDOW 3 -57 46 VTop 2
SYMATTR InstName R1
SYMATTR Value 10Meg
SYMBOL voltage 336 480 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -80 141 Left 2
SYMATTR Value PULSE(5 0 0 100n 100n 1ms 2ms 300)
SYMATTR InstName VIN1
SYMBOL 74hc04 288 448 R180
SYMATTR InstName U3
SYMBOL njf 288 112 M270
WINDOW 0 115 95 VLeft 2
WINDOW 3 81 97 VLeft 2
SYMATTR InstName J1
SYMATTR Value J201
SYMBOL voltage -544 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 36 39 Left 2
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL res 752 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1R
SYMBOL cap 720 144 R0
SYMATTR InstName C1
SYMATTR Value 100p
SYMBOL 74hc04 160 448 R180
SYMATTR InstName U1
SYMBOL res 96 320 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL cap 64 160 R0
SYMATTR InstName C2
SYMATTR Value 0.7p
SYMBOL res 240 288 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL njf 544 192 M270
WINDOW 0 115 98 VLeft 2
WINDOW 3 82 98 VLeft 2
SYMATTR InstName J2
SYMATTR Value J201
SYMBOL res 496 320 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -112 128 R90
WINDOW 0 88 60 VBottom 2
WINDOW 3 90 63 VTop 2
SYMATTR InstName R6
SYMATTR Value 10Meg
SYMBOL OpAmps\\OP07 -288 80 R0
SYMATTR InstName U2
SYMBOL voltage -656 -192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 42 41 Left 2
SYMATTR Value 15
SYMATTR InstName V1
SYMBOL voltage -656 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 36 39 Left 2
SYMATTR InstName V3
SYMATTR Value 15
SYMBOL cap 336 -80 R0
SYMATTR InstName C3
SYMATTR Value 47p
TEXT -376 -200 Left 2 !.tran 1s
TEXT -376 -120 Left 2 !.include 74hc.lib
TEXT 928 -128 Left 2 ;No. the keypoint to remember is that we don't do adc measurement,\nduring precharge. so we actually want to bias the timing. we are *not*\ntaking the averaged value.\n \nthe precharge. has added switch charge, but it is removed when switch back to\nthe signal, and do the measurement.\n--\nTo test charge-injection influence\n1. increase buffer impedance.  eg.  R6 from 1k to 10Meg.\n2. reduce precharge pulse time.\n3. run at higher freq/ more switches. eg. 1ms/1ms.
TEXT 928 -248 Left 2 ;signal/precharge switch.
TEXT 952 336 Left 2 ;10 nplc / 50Hz * 1000 == 200ms / reading .\n10nplc * 20ms = 200ms.\n1nplc * 20ms = 20ms.
TEXT 272 680 Left 2 ;ie. 1nplc, 1ms precharge, 20ms sample
