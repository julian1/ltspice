Version 4
SHEET 1 3300 1956
WIRE -336 -208 -336 -288
WIRE 960 -192 784 -192
WIRE 1024 -192 960 -192
WIRE 1200 -192 1024 -192
WIRE 1344 -192 1200 -192
WIRE 1872 -192 1728 -192
WIRE 1968 -192 1872 -192
WIRE 2064 -192 1968 -192
WIRE 2240 -192 2064 -192
WIRE 784 -160 784 -192
WIRE 1344 -160 1344 -192
WIRE 1728 -160 1728 -192
WIRE 2240 -160 2240 -192
WIRE 2832 -128 2608 -128
WIRE 960 -112 848 -112
WIRE 1280 -112 1200 -112
WIRE 1872 -112 1792 -112
WIRE 2176 -112 2064 -112
WIRE 2608 -80 2608 -128
WIRE 2832 -80 2832 -128
WIRE 896 -64 784 -64
WIRE 2240 -64 2128 -64
WIRE 1200 48 1200 -112
WIRE 1872 48 1872 -112
WIRE 2608 64 2608 0
WIRE 2832 64 2832 0
WIRE 2832 64 2608 64
WIRE 960 96 960 -16
WIRE 1136 96 960 96
WIRE 2064 96 2064 -16
WIRE 2064 96 1936 96
WIRE 1344 144 1344 -64
WIRE 1344 144 1200 144
WIRE 1728 144 1728 -64
WIRE 1872 144 1728 144
WIRE 2832 144 2832 64
WIRE 960 176 960 160
WIRE 1456 224 1344 224
WIRE 1504 224 1456 224
WIRE 1664 224 1584 224
WIRE 1728 224 1664 224
WIRE 544 288 432 288
WIRE 640 288 624 288
WIRE 704 288 640 288
WIRE 2320 288 2304 288
WIRE 2448 288 2400 288
WIRE 2496 288 2448 288
WIRE 2688 288 2576 288
WIRE 2736 288 2688 288
WIRE 1344 368 1344 304
WIRE 1344 368 1200 368
WIRE 1728 368 1728 304
WIRE 1872 368 1728 368
WIRE 640 400 640 288
WIRE 672 400 640 400
WIRE 2448 400 2448 288
WIRE 2448 400 2416 400
WIRE 960 416 960 240
WIRE 960 416 736 416
WIRE 1104 416 960 416
WIRE 1136 416 1104 416
WIRE 1968 416 1936 416
WIRE 2064 416 2064 224
WIRE 2064 416 1968 416
WIRE 2352 416 2064 416
WIRE 672 432 640 432
WIRE 2528 432 2416 432
WIRE 640 480 640 432
WIRE 1104 496 1104 416
WIRE 1968 496 1968 416
WIRE 1344 512 1344 368
WIRE 1728 512 1728 368
WIRE 1200 560 1200 464
WIRE 1200 560 1104 560
WIRE 1280 560 1200 560
WIRE 1872 560 1872 464
WIRE 1872 560 1792 560
WIRE 1968 560 1872 560
WIRE 1200 640 1008 640
WIRE 1344 640 1344 608
WIRE 1344 640 1200 640
WIRE 1728 640 1728 608
WIRE 1872 640 1728 640
WIRE 2112 640 1872 640
WIRE 1200 688 1200 640
WIRE 1872 688 1872 640
FLAG -336 -368 VCC
FLAG 1456 224 VOUT
FLAG 432 368 0
FLAG 1024 -192 VCC
FLAG 768 288 VOUT
FLAG 1200 688 0
FLAG -336 -208 0
FLAG 640 560 0
FLAG 704 448 0
FLAG 704 384 VCC
FLAG 784 16 0
FLAG 1664 224 VOUT2
FLAG 1968 -192 VCC
FLAG 1872 688 0
FLAG 2384 448 0
FLAG 2384 384 VCC
FLAG 2240 16 0
FLAG 2304 288 VOUT2
FLAG 2688 288 VOUT
FLAG 2528 512 0
SYMBOL pnp 896 -16 M180
SYMATTR InstName Q1
SYMATTR Value 2N3906
SYMBOL pnp 848 -64 R180
SYMATTR InstName Q3
SYMATTR Value 2N3906
SYMBOL res 976 -208 M0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL voltage -336 -384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 42 41 Left 2
SYMATTR Value 6
SYMATTR InstName V1
SYMBOL res 800 -80 M0
SYMATTR InstName R8
SYMATTR Value 20k
SYMBOL npn 1136 48 R0
SYMATTR InstName Q5
SYMATTR Value 2N3904
SYMBOL pnp 1136 464 M180
SYMATTR InstName Q6
SYMATTR Value 2N3906
SYMBOL voltage 432 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -271 -43 Left 2
WINDOW 0 -23 -10 Left 2
SYMATTR Value PULSE(0 3.3 0 100n 100n 0.2ms 0.4ms 14)
SYMATTR InstName VIN1
SYMBOL res 528 304 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R14
SYMATTR Value 5k
SYMBOL diode 944 96 R0
SYMATTR InstName D1
SYMBOL diode 944 176 R0
SYMATTR InstName D2
SYMBOL cap 768 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 5n
SYMBOL voltage 640 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 51 83 Left 2
WINDOW 0 52 43 Left 2
SYMATTR Value 1.6
SYMATTR InstName VIN2
SYMBOL res 1184 -208 R0
SYMATTR InstName R3
SYMATTR Value 270
SYMBOL res 1184 544 R0
SYMATTR InstName R4
SYMATTR Value 270
SYMBOL pnp 1280 -64 M180
SYMATTR InstName Q10
SYMATTR Value MJE15035
SYMBOL npn 1280 512 R0
SYMATTR InstName Q11
SYMATTR Value MJE15034
SYMBOL OpAmps\\LT1006 704 352 R0
SYMATTR InstName U1
SYMBOL pnp 2128 -16 R180
SYMATTR InstName Q2
SYMATTR Value 2N3906
SYMBOL pnp 2176 -64 M180
SYMATTR InstName Q4
SYMATTR Value 2N3906
SYMBOL res 2048 -208 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res 2224 -80 R0
SYMATTR InstName R2
SYMATTR Value 20k
SYMBOL npn 1936 48 M0
SYMATTR InstName Q7
SYMATTR Value 2N3904
SYMBOL pnp 1936 464 R180
SYMATTR InstName Q8
SYMATTR Value 2N3906
SYMBOL res 2592 304 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value 5k
SYMBOL diode 2080 96 M0
SYMATTR InstName D3
SYMBOL diode 2080 160 M0
SYMATTR InstName D4
SYMBOL res 1888 -208 M0
SYMATTR InstName R13
SYMATTR Value 270
SYMBOL res 1888 544 M0
SYMATTR InstName R15
SYMATTR Value 270
SYMBOL pnp 1792 -64 R180
SYMATTR InstName Q9
SYMATTR Value MJE15035
SYMBOL npn 1792 512 M0
SYMATTR InstName Q12
SYMATTR Value MJE15034
SYMBOL res 2848 -96 M0
SYMATTR InstName R16
SYMATTR Value 10R
SYMBOL OpAmps\\LT1006 2384 352 M0
SYMATTR InstName U2
SYMBOL res 2416 304 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R17
SYMATTR Value 5k
SYMBOL voltage 2528 416 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 51 83 Left 2
WINDOW 0 52 43 Left 2
SYMATTR Value 2.8
SYMATTR InstName VIN3
SYMBOL res 1328 128 R0
SYMATTR InstName R7
SYMATTR Value 0.1
SYMBOL res 1328 208 R0
SYMATTR InstName R9
SYMATTR Value 0.1
SYMBOL res 1712 128 R0
SYMATTR InstName R11
SYMATTR Value 0.1
SYMBOL res 1712 208 R0
SYMATTR InstName R12
SYMATTR Value 0.1
SYMBOL ind2 1600 208 R90
WINDOW 0 4 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 1m
SYMATTR Type ind
SYMBOL ind2 2624 16 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L2
SYMATTR Value 1m
SYMATTR Type ind
TEXT -112 -392 Left 2 !.tran 6ms
TEXT 560 392 Left 2 ;plus
TEXT -184 208 Left 2 ;0-3v3 square wave input.\nfrom mcu/ oscillator etc
TEXT -560 -88 Left 2 !.include standard.bjt
TEXT 112 -392 Left 2 ;still have issue of flux walk
TEXT 104 -352 Left 2 ;repeat circuit. and just invert digital input. rather than create inverter
TEXT 2528 392 Right 2 ;plus
TEXT 1240 -352 Left 2 ;consider add diodes. kickback\nconsider remove 0.1R. emitter degenerators
TEXT 2592 -232 Left 2 !K  L1 L2 1
TEXT 536 168 Left 2 ;eg. integrator
TEXT 2376 192 Left 2 ;eg. inverter
