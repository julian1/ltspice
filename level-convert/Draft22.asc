Version 4
SHEET 1 2552 760
WIRE 256 -16 96 -16
WIRE 592 -16 416 -16
WIRE 1024 -16 848 -16
WIRE 1264 -16 1264 -64
WIRE 1264 -16 1184 -16
WIRE 1264 0 1264 -16
WIRE 1360 0 1264 0
WIRE 96 32 96 -16
WIRE 336 80 336 -16
WIRE 384 80 336 80
WIRE 592 80 592 -16
WIRE 848 80 848 -16
WIRE 1104 80 1104 -16
WIRE 1104 80 1056 80
WIRE 544 96 448 96
WIRE 992 96 896 96
WIRE 240 112 96 112
WIRE 384 112 240 112
WIRE 1328 112 1056 112
WIRE 1088 272 960 272
WIRE 1264 272 1264 0
WIRE 1264 272 1152 272
WIRE 1264 320 1264 272
WIRE 1040 336 1040 304
WIRE 592 352 592 176
WIRE 1008 352 592 352
WIRE 1104 368 1072 368
WIRE 1200 368 1184 368
WIRE 848 384 848 176
WIRE 960 384 960 272
WIRE 960 384 848 384
WIRE 1008 384 960 384
WIRE 592 432 592 352
WIRE 848 432 848 384
WIRE 128 496 0 496
WIRE 1616 496 1488 496
WIRE 1040 512 1040 400
WIRE 1264 512 1264 496
WIRE 128 576 0 576
WIRE 1600 576 1488 576
FLAG 1600 576 VEE2
FLAG 1488 416 VCC2
FLAG 1024 128 VEE2
FLAG 1024 64 VCC2
FLAG 1040 512 VEE3
FLAG 1264 -144 VCC2
FLAG 1488 656 VEE3
FLAG 592 512 VEE3
FLAG 848 512 VEE3
FLAG 1264 512 VEE3
FLAG 1328 112 0
FLAG 1616 496 0
FLAG 1360 0 OUT
FLAG 1040 304 VEE2
FLAG 0 416 VCC4
FLAG 128 496 VGND4
FLAG 128 576 VEE4
FLAG 0 656 VEE3
FLAG 416 64 VCC4
FLAG 416 128 VEE4
FLAG 240 112 VGND4
SYMBOL voltage 96 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 24 44 Left 2
SYMATTR Value SINE(1 1 50)
SYMATTR InstName VIN
SYMBOL voltage 1488 560 R0
WINDOW 0 54 29 Left 2
WINDOW 3 50 56 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 50
SYMBOL voltage 1488 480 R0
WINDOW 0 54 29 Left 2
WINDOW 3 50 56 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL res 576 416 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL OpAmps\\LT1006 416 32 R0
SYMATTR InstName U1
SYMBOL res 352 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 432 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL pmos 544 176 M180
SYMATTR InstName M1
SYMBOL voltage 1488 400 R0
WINDOW 0 54 29 Left 2
WINDOW 3 50 56 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL res 864 416 M0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL OpAmps\\LT1006 1024 32 M0
SYMATTR InstName U2
SYMBOL res 1088 -32 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 1008 -32 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL pmos 896 176 R180
SYMATTR InstName M2
SYMBOL npn 1200 320 R0
SYMATTR InstName Q1
SYMBOL OpAmps\\LT1006 1040 304 R0
WINDOW 3 11 129 Left 2
SYMATTR InstName U3
SYMBOL res 1280 400 M0
SYMATTR InstName R7
SYMATTR Value 20R
SYMBOL current 1264 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 1mA
SYMBOL cap 1152 256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 100p
SYMBOL voltage 0 480 R0
WINDOW 0 54 29 Left 2
WINDOW 3 50 56 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 15
SYMBOL voltage 0 400 R0
WINDOW 0 54 29 Left 2
WINDOW 3 50 56 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 15
SYMBOL voltage 0 560 R0
WINDOW 0 54 29 Left 2
WINDOW 3 50 56 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 100
SYMBOL res 1088 352 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
TEXT -104 -152 Left 2 !;dc V1 0 10 0.01
TEXT 304 448 Left 2 !.tran 0.1
TEXT 1504 -8 Left 2 ;level translation on high common mode, without large resistors.\n \nOK. This works. It will sense a small positive differential voltage on large common mode.\nTo sense a negative current, we would invert the signal first.\nThat is OK. because we already have separate switching for + or - current.
TEXT -56 -56 Left 2 ;Common mode = 100V
