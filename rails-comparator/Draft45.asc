Version 4
SHEET 1 1988 868
WIRE 672 -144 352 -144
WIRE -496 -112 -576 -112
WIRE -576 -96 -576 -112
WIRE -496 -96 -496 -112
WIRE 448 -96 416 -96
WIRE 64 -64 -80 -64
WIRE 192 -48 128 -48
WIRE 352 -48 272 -48
WIRE 64 -32 -304 -32
WIRE 1312 16 1312 -64
WIRE 1776 32 1776 -64
WIRE 1440 96 1312 96
WIRE 1952 96 1776 96
WIRE 1312 112 1312 96
WIRE 1776 112 1776 96
WIRE 1280 144 1152 144
WIRE 1744 144 1616 144
WIRE 1312 224 1312 176
WIRE 1776 224 1776 176
WIRE 64 256 -304 256
WIRE 192 272 128 272
WIRE 352 272 352 -48
WIRE 352 272 272 272
WIRE 64 288 -64 288
FLAG -80 16 0
FLAG -496 -96 0
FLAG -576 -192 VCC
FLAG -576 -16 VEE
FLAG -752 -96 P3V3
FLAG -752 -16 0
FLAG -304 336 0
FLAG 352 -224 P3V3
FLAG -304 48 0
FLAG 96 -80 VCC
FLAG 96 -48 VEE
FLAG 448 -96 0
FLAG 96 240 VCC
FLAG 96 304 VEE
FLAG -64 368 0
FLAG 96 -16 VEE
FLAG -304 -112 VCC
FLAG -304 176 VEE
FLAG 1312 224 0
FLAG 1152 64 VCC
FLAG 1152 224 0
FLAG 1616 64 0
FLAG 1776 224 VEE
FLAG 1616 224 VEE
FLAG 1776 -144 0
FLAG 1312 -64 VCC
SYMBOL voltage -576 -208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 40 42 Left 2
SYMATTR Value 15
SYMATTR InstName V2
SYMBOL voltage -576 -112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 36 39 Left 2
SYMATTR InstName V3
SYMATTR Value 15
SYMBOL voltage -80 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -66 99 Left 2
SYMATTR Value 1V
SYMATTR InstName VIN1
SYMBOL voltage -752 -112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 40 42 Left 2
SYMATTR Value 3.3
SYMATTR InstName V1
SYMBOL res -320 160 R0
SYMATTR InstName R2
SYMATTR Value 13.5k
SYMBOL res -320 240 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 336 -240 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -320 -128 R0
SYMATTR InstName R5
SYMATTR Value 6.6k
SYMBOL res -320 -48 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL Comparators\\LT1018 96 -48 R0
SYMATTR InstName U3
SYMBOL npn 416 -144 M0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL Comparators\\LT1018 96 272 R0
SYMATTR InstName U1
SYMBOL voltage -64 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -91 77 Left 2
SYMATTR Value -1V
SYMATTR InstName VIN2
SYMBOL res 288 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 20k
SYMBOL res 288 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 20k
SYMBOL TL431A 1312 144 M0
SYMATTR InstName U2
SYMBOL res 1168 48 M0
SYMATTR InstName R9
SYMATTR Value 3k
SYMBOL res 1168 128 M0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL TL431A 1776 144 M0
SYMATTR InstName U4
SYMBOL res 1632 48 M0
SYMATTR InstName R11
SYMATTR Value 4k
SYMBOL res 1632 128 M0
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL LED 1760 32 R0
SYMATTR InstName D2
SYMBOL res 1328 0 M0
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 1792 -160 M0
SYMATTR InstName R13
SYMATTR Value 10k
TEXT -600 456 Left 2 !.tran 3ms
TEXT 256 352 Left 2 ;OUT is high if + > -.
TEXT 528 -328 Left 2 ;the difficulty is that it requires -1V as reference.\nthat is not dependent on the negative rail.
TEXT 808 -200 Left 2 ;tl431 K only pulls down to 2.0V or so.\nso cannot be used directly with bjt.
TEXT -288 -248 Left 2 ;this doesn't work. because comparator rails,\nare not 5V. which is only available rail.
