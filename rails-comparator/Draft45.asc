Version 4
SHEET 1 2720 868
WIRE -496 -112 -576 -112
WIRE -576 -96 -576 -112
WIRE -496 -96 -496 -112
WIRE 240 -80 240 -96
WIRE 352 -80 240 -80
WIRE 64 -64 32 -64
WIRE 240 -48 240 -80
WIRE 240 -48 128 -48
WIRE 64 -32 -304 -32
WIRE 1872 0 1872 -16
WIRE 2240 0 1872 0
WIRE 912 48 912 -32
WIRE 1872 48 1872 0
WIRE 32 96 32 -64
WIRE 32 96 -80 96
WIRE 1984 96 1936 96
WIRE -80 112 -80 96
WIRE -80 112 -144 112
WIRE 928 128 912 128
WIRE 1168 128 1120 128
WIRE -144 144 -144 112
WIRE -112 144 -144 144
WIRE 1728 208 1712 208
WIRE 928 224 912 224
WIRE 1136 224 1120 224
WIRE 1280 224 1280 208
WIRE 1280 224 1136 224
WIRE 912 256 912 224
WIRE 1872 256 1872 224
WIRE -176 288 -192 288
WIRE -64 288 -96 288
WIRE 880 288 752 288
WIRE 1840 288 1712 288
WIRE 32 352 32 96
WIRE 64 352 32 352
WIRE -272 368 -416 368
WIRE -192 368 -192 288
WIRE -160 368 -192 368
WIRE 240 368 240 -48
WIRE 240 368 128 368
WIRE 912 368 912 320
WIRE 1872 368 1872 320
WIRE -64 384 -64 288
WIRE -64 384 -96 384
WIRE 64 384 -64 384
WIRE -160 400 -192 400
WIRE -192 432 -192 400
FLAG -496 -96 0
FLAG -576 -192 VCC
FLAG -576 -16 VEE
FLAG -752 -96 P5V
FLAG -752 -16 0
FLAG -416 448 0
FLAG -304 48 0
FLAG -304 -112 VCC
FLAG -416 288 VEE
FLAG 912 368 0
FLAG 752 208 VCC
FLAG 752 368 0
FLAG 1728 208 0
FLAG 1872 368 VEE
FLAG 1712 368 VEE
FLAG 912 -32 VCC
FLAG 96 -16 0
FLAG 96 400 0
FLAG 96 -80 P5V
FLAG 96 336 P5V
FLAG -80 16 P5V
FLAG -80 176 0
FLAG 240 -176 P5V
FLAG -192 432 0
FLAG -128 352 P5V
FLAG -128 416 0
FLAG 1984 96 0
FLAG 1872 -96 P5V
FLAG 1168 128 P5V
FLAG 1136 304 0
SYMBOL voltage -576 -208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 40 42 Left 2
SYMATTR Value 13
SYMATTR InstName V2
SYMBOL voltage -576 -112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 36 39 Left 2
SYMATTR InstName V3
SYMATTR Value 15
SYMBOL voltage -752 -112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 40 42 Left 2
SYMATTR Value 5V
SYMATTR InstName V1
SYMBOL res -432 272 R0
SYMATTR InstName R2
SYMATTR Value 4k
SYMBOL res -432 352 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 224 -192 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -320 -128 R0
SYMATTR InstName R5
SYMATTR Value 4k
SYMBOL res -320 -48 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL Comparators\\LT1018 96 -48 R0
SYMATTR InstName U3
SYMBOL Comparators\\LT1018 96 368 R0
SYMATTR InstName U1
SYMBOL TL431A 912 288 M0
SYMATTR InstName U2
SYMBOL res 768 192 M0
SYMATTR InstName R9
SYMATTR Value 15k
SYMBOL res 768 272 M0
SYMATTR InstName R10
SYMATTR Value 3k
SYMBOL TL431A 1872 288 M0
SYMATTR InstName U4
SYMBOL res 1728 192 M0
SYMATTR InstName R11
SYMATTR Value 4k
SYMBOL res 1728 272 M0
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 928 32 M0
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL TL431A -80 144 M0
SYMATTR InstName U5
SYMBOL res -64 0 M0
SYMATTR InstName R7
SYMATTR Value 5k
SYMBOL OpAmps\\LT1006 -128 320 R0
SYMATTR InstName U6
SYMBOL res -176 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -80 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL npn 1936 48 M0
SYMATTR InstName Q1
SYMBOL res 1888 -112 M0
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 1856 240 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL Optos\\PC817A 1024 176 R0
SYMATTR InstName U7
SYMBOL res 1152 208 M0
SYMATTR InstName R13
SYMATTR Value 10k
TEXT -600 456 Left 2 !.tran 3ms
TEXT 512 -360 Left 2 ;tl431 is *not* open-collector only pulls to 2.0V or so.\nso cannot be used with earth referenced bjt
TEXT 1880 -240 Left 2 ;won't work\nthe tl431, needs quiesent current for power, which always turn on q1.
TEXT -160 -288 Left 2 ;lt1018==cmos lm393,lm339 etc.
TEXT 1880 -304 Left 2 ;could use series optocoupler. but part is expensive.\nand quiescent current is always issue.
TEXT 784 -144 Left 2 ;output goes hi. if rail not up. \nwhich is kind of inverted for combining open-collector logic.\nBut can put resistor on emitter. althoug won't combine.
