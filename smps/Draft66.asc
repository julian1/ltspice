Version 4
SHEET 1 5720 1268
WIRE 576 -80 544 -80
WIRE 1600 64 1568 64
WIRE 992 80 960 80
WIRE 1872 80 1728 80
WIRE 272 96 176 96
WIRE 464 96 272 96
WIRE 544 96 544 -80
WIRE 560 96 544 96
WIRE 1264 96 1120 96
WIRE 1600 96 1264 96
WIRE 640 112 640 -80
WIRE 640 112 624 112
WIRE 992 112 640 112
WIRE 560 128 464 128
WIRE 1568 208 1568 64
WIRE 1872 208 1872 80
WIRE 1872 208 1568 208
WIRE 2080 208 1872 208
WIRE 960 224 960 80
WIRE 1264 224 1264 96
WIRE 1264 224 960 224
WIRE 1568 336 1568 208
WIRE 1600 336 1568 336
WIRE 960 352 960 224
WIRE 992 352 960 352
WIRE 1872 352 1872 208
WIRE 1872 352 1728 352
WIRE 1264 368 1264 224
WIRE 1264 368 1120 368
WIRE 1600 368 1520 368
WIRE -208 384 -288 384
WIRE 992 384 912 384
WIRE -288 400 -288 384
WIRE -208 400 -208 384
FLAG -208 400 0
FLAG -288 304 VCC
FLAG -288 480 VEE
FLAG -464 400 0
FLAG -464 320 P15V
FLAG 176 176 0
FLAG 272 96 DRIVE
FLAG 592 80 VCC
FLAG 592 144 VEE
FLAG 464 208 0
FLAG 912 464 0
FLAG 1024 64 VCC
FLAG 1024 336 VCC
FLAG 1024 400 VEE
FLAG 1024 128 VEE
FLAG 1520 448 0
FLAG 1632 48 VCC
FLAG 1632 320 VCC
FLAG 1632 384 VEE
FLAG 1632 112 VEE
FLAG 1264 448 0
FLAG 1872 0 VCC
SYMBOL voltage -288 288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 5
SYMATTR InstName V2
SYMBOL voltage -288 384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 36 39 Left 2
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL voltage -464 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 15
SYMATTR InstName V4
SYMBOL voltage 176 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -545 49 Left 2
SYMATTR Value PULSE(2 3 50us 10ns 10ns 20us 50us 7)
SYMATTR InstName V1
SYMBOL voltage 464 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -78 78 Left 2
WINDOW 0 -77 54 Left 2
SYMATTR Value 2.5
SYMATTR InstName V7
SYMBOL res 560 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 -49 62 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL cap 640 -96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -53 31 VTop 2
SYMATTR InstName C5
SYMATTR Value 100p
SYMBOL voltage 912 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -78 78 Left 2
WINDOW 0 -77 54 Left 2
SYMATTR Value 2.2
SYMATTR InstName V6
SYMBOL OpAmps\\LT1006 592 48 R0
SYMATTR InstName U1
SYMBOL diode 1056 112 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMBOL diode 1056 384 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMBOL res 1248 352 R0
SYMATTR InstName R1
SYMATTR Value 5k
SYMBOL OpAmps\\LT1677 1024 32 R0
SYMATTR InstName U2
SYMBOL OpAmps\\LT1677 1024 304 R0
SYMATTR InstName U3
SYMBOL voltage 1520 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -78 78 Left 2
WINDOW 0 -77 54 Left 2
SYMATTR Value 2.8
SYMATTR InstName V5
SYMBOL diode 1728 64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMBOL diode 1728 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMBOL res 1856 -16 R0
SYMATTR InstName R2
SYMATTR Value 5k
SYMBOL OpAmps\\LT1677 1632 16 R0
SYMATTR InstName U4
SYMBOL OpAmps\\LT1677 1632 288 R0
SYMATTR InstName U5
TEXT -88 -224 Left 2 !.tran 0.5ms
TEXT 1040 -624 Left 2 ;- problem is the diodes are operating to near 0V.o for the  op.\n- there is issue of anti-parallel diodes in op-amp. probably should be jfet.\n- jfet is not single supply, and has issue of input and output range.
TEXT 1312 360 Left 2 ;max
TEXT 1920 96 Left 2 ;min
