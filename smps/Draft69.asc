Version 4
SHEET 1 6648 1268
WIRE 1360 -112 1200 -112
WIRE 1360 -32 1200 -32
WIRE 640 0 544 0
WIRE 944 0 944 -32
WIRE 944 0 704 0
WIRE 944 32 944 0
WIRE 1072 32 944 32
WIRE 944 64 944 32
WIRE 544 96 544 0
WIRE 560 96 544 96
WIRE 1072 96 1072 32
WIRE 640 112 624 112
WIRE 688 112 640 112
WIRE 880 112 768 112
WIRE 560 128 544 128
WIRE 1072 160 944 160
WIRE 544 240 544 128
WIRE 560 240 544 240
WIRE 640 240 640 112
WIRE 640 240 624 240
WIRE -208 384 -288 384
WIRE -288 400 -288 384
WIRE -208 400 -208 384
FLAG -208 400 0
FLAG -288 304 VCC
FLAG -288 480 VEE
FLAG -464 400 0
FLAG -464 320 P15V
FLAG 112 160 0
FLAG 464 96 DRIVE
FLAG 592 144 VCC
FLAG 592 80 VEE
FLAG 944 -192 VCC
FLAG 944 240 0
FLAG 320 400 0
FLAG 320 320 LP0V5
FLAG 464 128 LP0V5
FLAG 112 80 DRIVE
FLAG 48 256 DRIVE
FLAG 160 256 CDRIVE
SYMBOL voltage -288 288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 5
SYMATTR InstName V2
SYMBOL voltage -288 384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 36 39 Left 2
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL voltage -464 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 15
SYMATTR InstName V4
SYMBOL voltage 112 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -545 49 Left 2
SYMATTR Value PULSE(0 1 1us 10ns 10ns 25us 50us 7)
SYMATTR InstName V1
SYMBOL res 560 80 R90
WINDOW 0 -29 54 VBottom 2
WINDOW 3 -28 54 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL npn 880 64 R0
SYMATTR InstName Q1
SYMATTR Value MJE15034
SYMBOL res 784 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 250R
SYMBOL res 928 -208 R0
SYMATTR InstName R4
SYMATTR Value 0.01R
SYMBOL res 928 144 R0
SYMATTR InstName R5
SYMATTR Value 1R
SYMBOL ind2 928 -128 R0
SYMATTR InstName L1
SYMATTR Value 1000µ
SYMATTR Type ind
SYMBOL ind2 1184 -128 R0
SYMATTR InstName L2
SYMATTR Value 1000µ
SYMATTR Type ind
SYMBOL res 1344 -128 R0
SYMATTR InstName R6
SYMATTR Value 5R
SYMBOL voltage 320 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -78 78 Left 2
WINDOW 0 -77 54 Left 2
SYMATTR Value 0.5
SYMATTR InstName V5
SYMBOL cap 704 -16 R90
WINDOW 0 87 64 VBottom 2
WINDOW 3 31 60 VTop 2
SYMATTR InstName C2
SYMATTR Value 0.3n
SYMBOL 74hc04 96 192 R0
SYMATTR InstName U3
SYMATTR SpiceLine VCC=1  SPEED=1.0  TRIPDT=1e-9
SYMBOL res 560 112 R90
WINDOW 0 64 57 VBottom 2
WINDOW 3 59 58 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL cap 624 224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 20p
SYMBOL OpAmps\\LT1677 592 176 M180
SYMATTR InstName U1
TEXT -88 -224 Left 2 !.tran 0.5ms
TEXT -72 -288 Left 2 !K L1 L2 0.99
TEXT 1168 -296 Left 2 ;Ok. we have something confused. \nWhen slewing collector/drain, and at high load eg. 5R./1A then current\nand current sense is inherently smoothed/slewed. \nWhy? bjt saturation?
TEXT -96 -160 Left 2 !.include 74hc.lib
TEXT -32 328 Left 2 ;modified. VCC=1V
TEXT 528 472 Left 2 !.MODEL MJE15034 NPN (IS=3.92866p BF=260.938 NF=1.02215 VAF=15.3399 IKF=0.160087 ISE=1e-08 NE=2.54491 BR=26.0938 NR=1.10885 VAR=153.399 IKR=1.60087 ISC=10n NC=1.89024 RB=0.41209 IRB=0.1 RBM=0.41209 RE=0.0001 RC=0.208002 XTB=0.897431 XTI=1.39234 EG=1.206 CJE=1.61534n VJE=0.698417 MJE=0.382854 TF=1.03079n XTF=1000 VTF=100000 ITF=42.9041 CJC=1.04458e-10 VJC=0.441587 MJC=0.23 XCJC=1 FC=0.8 TR=100n PTF=0 mfg=OnSemi)
TEXT 1416 144 Left 2 ;fast bjt like mje15034g wants a faster op driver to avoid oscillaton.\n2n3055  works ok with lt1006.
