Version 4
SHEET 1 5720 1268
WIRE 672 -80 672 -144
WIRE 272 -64 112 -64
WIRE 272 -32 272 -64
WIRE 1088 -16 976 -16
WIRE 1296 -16 1152 -16
WIRE 1456 -16 1296 -16
WIRE 768 0 672 0
WIRE 416 48 368 48
WIRE 464 48 416 48
WIRE 608 48 544 48
WIRE 976 48 976 -16
WIRE -192 80 -272 80
WIRE -272 96 -272 80
WIRE -192 96 -192 80
WIRE 768 96 672 96
WIRE 432 112 368 112
WIRE 1296 128 1296 48
WIRE 1296 128 976 128
WIRE 464 384 432 384
WIRE 432 432 432 384
WIRE -592 448 -624 448
WIRE -480 448 -512 448
WIRE 1040 480 976 480
WIRE 1168 496 1120 496
WIRE -144 512 -192 512
WIRE 544 512 544 384
WIRE 544 512 528 512
WIRE 592 512 544 512
WIRE 864 512 784 512
WIRE 880 512 864 512
WIRE 1040 512 880 512
WIRE -624 528 -624 448
WIRE -576 528 -624 528
WIRE -16 528 -64 528
WIRE 112 528 112 -64
WIRE 112 528 -16 528
WIRE -480 544 -480 448
WIRE -480 544 -512 544
WIRE -336 544 -480 544
WIRE -144 544 -336 544
WIRE -576 560 -624 560
WIRE 976 576 976 480
WIRE -192 608 -192 512
WIRE -624 624 -624 560
WIRE 880 640 880 512
WIRE 592 688 592 512
WIRE 736 688 592 688
WIRE -528 800 -560 800
WIRE -112 800 -448 800
WIRE -80 800 -112 800
WIRE 272 800 272 192
WIRE 432 800 432 656
WIRE 432 800 272 800
WIRE 1168 800 1168 496
WIRE 1168 800 432 800
FLAG -192 96 0
FLAG -272 0 VCC
FLAG -272 176 VEE
FLAG 672 176 0
FLAG 1456 64 0
FLAG 1296 128 0
FLAG -448 96 0
FLAG -448 16 P15V
FLAG 672 -224 P15V
FLAG 176 80 0
FLAG 880 736 0
FLAG 784 576 0
FLAG 1056 544 0
FLAG 1072 448 VCC
FLAG 1072 544 VEE
FLAG 1168 416 VCC
FLAG 976 656 0
FLAG 336 512 0
FLAG 336 544 0
FLAG 704 512 VCC
FLAG 176 48 0
FLAG -624 368 0
FLAG -544 512 VCC
FLAG -544 576 VEE
FLAG 864 512 CRAMP
FLAG 768 96 IRAMP
FLAG -704 560 IRAMP
FLAG 416 48 SWDRIVE
FLAG -128 576 0
FLAG -112 480 VCC
FLAG -112 576 VEE
FLAG -192 688 0
FLAG -16 448 VCC
FLAG 432 112 XXX
FLAG -80 800 SLOPERAMP
FLAG -560 800 SWDRIVE
FLAG -448 864 0
FLAG -112 896 0
FLAG -256 848 XXX
FLAG -336 544 SUMRAMP
FLAG -704 624 SLOPERAMP
FLAG -304 480 IRAMP
SYMBOL voltage -272 -16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 5
SYMATTR InstName V2
SYMBOL voltage -272 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 36 39 Left 2
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL 74hc74 272 -32 R0
SYMATTR InstName U1
SYMBOL ind2 656 -96 R0
SYMATTR InstName L1
SYMATTR Value 600µ
SYMATTR Type ind
SYMBOL npn 608 0 R0
SYMATTR InstName Q1
SYMBOL res 656 80 R0
SYMATTR InstName R1
SYMATTR Value 0.7R
SYMBOL res 560 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 250R
SYMBOL ind2 960 144 M180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L3
SYMATTR Value 200µ
SYMATTR Type ind
SYMBOL diode 1088 0 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL res 1440 -32 R0
SYMATTR InstName R5
SYMATTR Value 50R
SYMBOL voltage -448 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 15
SYMATTR InstName V4
SYMBOL res 688 -128 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 0.01R
SYMBOL cap 1280 -16 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL 74hc74 432 432 R0
SYMATTR InstName U4
SYMBOL res 800 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL cap 768 512 R0
SYMATTR InstName C4
SYMATTR Value 50n
SYMBOL npn 816 640 R0
SYMATTR InstName Q4
SYMBOL res 832 672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 100R
SYMBOL Comparators\\LT1011 1072 496 R0
SYMATTR InstName U5
SYMBOL res 1152 400 R0
SYMATTR InstName R12
SYMATTR Value 3.3k
SYMBOL voltage 976 560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 1V
SYMATTR InstName V6
SYMBOL OpAmps\\LT1006 -544 480 R0
WINDOW 3 30 120 Left 2
SYMATTR InstName U3
SYMBOL res -608 464 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res -496 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res -720 576 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 85 57 VBottom 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res -720 640 R270
WINDOW 0 -32 55 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL Comparators\\LT1011 -112 528 R0
SYMATTR InstName U6
SYMBOL res -32 432 R0
SYMATTR InstName R14
SYMATTR Value 3.3k
SYMBOL voltage -192 592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 0.5V
SYMATTR InstName V5
SYMBOL res 560 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -432 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL cap -464 800 R0
SYMATTR InstName C2
SYMATTR Value 50n
SYMBOL npn -176 800 R0
SYMATTR InstName Q2
SYMBOL res -160 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 1k
TEXT -168 -224 Left 2 !.tran 0.5ms
TEXT -208 -312 Left 2 !.include 74hc.lib
TEXT 944 -360 Left 2 !K L1 L3 0.99
TEXT 1704 -152 Left 2 ;Slope compensation is implemented by summing a periodic ramp \nwith the sensed current signal. One way to create the ramp is to use\n the R-C oscillator waveform generated by the control IC.1,2 The oscillator \nis generally buffered by an emitter follower and fed into a resistor, \nsumming the oscillator ramp with the sensed current signal, \nwhich feeds another resistor.
TEXT 1696 104 Left 2 ;We make the slope ramp separate from cycle ramp,\nthat enables to turn it off, and avoid spurious signals.\n- we cannot use a diode, because voltages are too low.
