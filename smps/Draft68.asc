Version 4
SHEET 1 5720 1268
WIRE 1440 -288 1424 -288
WIRE 1424 -192 1424 -288
WIRE 1440 -192 1424 -192
WIRE 1504 -192 1504 -288
WIRE 1344 -128 1280 -128
WIRE 1424 -112 1424 -192
WIRE 1440 -112 1424 -112
WIRE 1504 -112 1504 -192
WIRE 2064 -80 1952 -80
WIRE 1344 -32 1344 -128
WIRE 1376 -32 1344 -32
WIRE 1424 -32 1424 -112
WIRE 1504 -32 1504 -112
WIRE 560 -16 544 -16
WIRE 640 -16 624 -16
WIRE 2064 0 1952 0
WIRE 1280 64 960 64
WIRE 1424 64 1424 -32
WIRE 1440 64 1424 64
WIRE 1504 80 1504 -32
WIRE 1584 80 1504 80
WIRE 352 96 256 96
WIRE 464 96 352 96
WIRE 544 96 544 -16
WIRE 560 96 544 96
WIRE 1440 96 1392 96
WIRE 640 112 640 -16
WIRE 640 112 624 112
WIRE 784 112 640 112
WIRE 896 112 864 112
WIRE 560 128 400 128
WIRE 1392 128 1392 96
WIRE 1056 160 960 160
WIRE 400 176 400 128
WIRE 544 352 544 96
WIRE 1584 352 1584 80
WIRE 1584 352 608 352
WIRE -208 384 -288 384
WIRE -288 400 -288 384
WIRE -208 400 -208 384
FLAG -208 400 0
FLAG -288 304 VCC
FLAG -288 480 VEE
FLAG -464 400 0
FLAG -464 320 P15V
FLAG 256 176 0
FLAG 352 96 DRIVE
FLAG 592 80 VCC
FLAG 592 144 VEE
FLAG 400 256 0
FLAG 960 240 0
FLAG 880 -96 P15V
FLAG 960 -96 VCC
FLAG 1472 48 VCC
FLAG 1472 112 VEE
FLAG 1280 -48 0
FLAG 1392 208 0
SYMBOL voltage -288 288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 5
SYMATTR InstName V2
SYMBOL voltage -288 384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 36 39 Left 2
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL voltage -464 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 15
SYMATTR InstName V4
SYMBOL voltage 256 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -545 49 Left 2
SYMATTR Value PULSE(0 1 1us 10ns 10ns 20us 50us 7)
SYMATTR InstName V1
SYMBOL voltage 400 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -78 78 Left 2
WINDOW 0 -77 54 Left 2
SYMATTR Value 0.5
SYMATTR InstName V7
SYMBOL res 560 80 R90
WINDOW 0 70 55 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL OpAmps\\LT1006 592 48 R0
SYMATTR InstName U1
SYMBOL cap 608 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -53 31 VTop 2
SYMATTR InstName C3
SYMATTR Value 500p
SYMBOL npn 896 64 R0
SYMATTR InstName Q1
SYMBOL res 944 -112 R0
SYMATTR InstName R3
SYMATTR Value 0.01R
SYMBOL res 880 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 944 144 R0
SYMATTR InstName R6
SYMATTR Value 0.5R
SYMBOL ind2 944 -32 R0
SYMATTR InstName L1
SYMATTR Value 500µ
SYMATTR Type ind
SYMBOL ind2 1968 16 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L2
SYMATTR Value 500µ
SYMATTR Type ind
SYMBOL res 2048 -96 R0
SYMATTR InstName R7
SYMATTR Value 15R
SYMBOL voltage 1280 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -78 78 Left 2
WINDOW 0 -77 54 Left 2
SYMATTR Value 0.5
SYMATTR InstName V5
SYMBOL res 1440 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 1520 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL voltage 1392 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -78 78 Left 2
WINDOW 0 -77 54 Left 2
SYMATTR Value 0.5
SYMATTR InstName V8
SYMBOL cap 1344 48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL cap 624 -32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 20p
SYMBOL diode 1504 -128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMBOL OpAmps\\LT1677 1472 16 R0
SYMATTR InstName U2
SYMBOL cap 1504 -304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 100p
SYMBOL diode 1440 -176 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
TEXT -88 -224 Left 2 !.tran 0.5ms
TEXT 1040 -624 Left 2 ;- problem is the diodes are operating to near 0V.o for the  op.\n- there is issue of anti-parallel diodes in op-amp. probably should be jfet.\n- jfet is not single supply, and has issue of input and output range.
TEXT 2008 -224 Left 2 ;An integrator, with the sharp edges blunted by RC low pass filter.\nneed to see what happens, if drive through a bjt.\nDo we even need an integrator. switch the bjt on. and feedback the drain?
TEXT 728 -192 Left 2 !K L1 L2 0.99
TEXT 1856 176 Left 2 ;Think this is actually working.\nEg. change integrator cap from 200p for fast, to 500 to 1n for slow.
