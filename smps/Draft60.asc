Version 4
SHEET 1 2932 904
WIRE 672 -80 672 -144
WIRE 304 -64 144 -64
WIRE 304 -32 304 -64
WIRE 768 0 672 0
WIRE 432 48 400 48
WIRE 464 48 432 48
WIRE 608 48 544 48
WIRE 1296 64 1248 64
WIRE -192 80 -272 80
WIRE 1424 80 1376 80
WIRE -272 96 -272 80
WIRE -192 96 -192 80
WIRE 1296 96 672 96
WIRE 1776 128 1712 128
WIRE 1856 128 1776 128
WIRE 1984 128 1984 112
WIRE 1984 128 1856 128
WIRE 2032 128 1984 128
WIRE 2112 128 2032 128
WIRE 2512 128 2208 128
WIRE 1712 192 1536 192
WIRE 1808 192 1776 192
WIRE 2160 208 2160 192
WIRE 2160 208 2032 208
WIRE 400 240 400 112
WIRE 1776 256 1712 256
WIRE 1856 256 1856 192
WIRE 1856 256 1776 256
WIRE 1936 256 1856 256
WIRE 1808 272 1808 192
WIRE 1808 272 1536 272
WIRE 1040 304 896 304
WIRE 1168 320 1120 320
WIRE 752 336 688 336
WIRE 1040 336 752 336
WIRE 304 416 304 192
WIRE 1168 416 1168 320
WIRE 1168 416 304 416
WIRE 144 448 144 -64
WIRE 1424 448 1424 80
WIRE 1424 448 144 448
WIRE 896 480 896 304
WIRE 1248 480 1248 64
WIRE 752 528 752 336
WIRE 848 576 816 576
WIRE 848 608 848 576
WIRE 752 672 752 624
WIRE 432 720 432 48
WIRE 928 720 928 608
WIRE 928 720 432 720
FLAG -192 96 0
FLAG -272 0 VCC
FLAG -272 176 VEE
FLAG 672 176 0
FLAG 1312 128 0
FLAG 1328 32 VCC
FLAG 1328 128 VEE
FLAG 1424 0 VCC
FLAG 2512 208 0
FLAG 1248 560 0
FLAG 1936 256 0
FLAG 2032 272 0
FLAG -448 96 0
FLAG -448 16 P15V
FLAG 672 -224 P15V
FLAG 1056 368 0
FLAG 1072 272 VCC
FLAG 1072 368 VEE
FLAG 1168 240 VCC
FLAG 688 400 0
FLAG 896 560 0
FLAG 208 48 VCC
FLAG 208 80 0
FLAG 752 672 0
FLAG 608 336 VCC
SYMBOL voltage -272 -16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 5
SYMATTR InstName V2
SYMBOL voltage -272 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 36 39 Left 2
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL 74hc74 304 -32 R0
SYMATTR InstName U1
SYMBOL ind2 656 -96 R0
SYMATTR InstName L1
SYMATTR Value 200µ
SYMATTR Type ind
SYMBOL npn 608 0 R0
SYMATTR InstName Q1
SYMBOL res 656 80 R0
SYMATTR InstName R1
SYMATTR Value 0.7R
SYMBOL res 560 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 250R
SYMBOL ind2 1552 288 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L3
SYMATTR Value 200µ
SYMATTR Type ind
SYMBOL Comparators\\LT1011 1328 80 R0
SYMATTR InstName U2
SYMBOL res 1408 -16 R0
SYMATTR InstName R2
SYMATTR Value 3.3k
SYMBOL diode 1728 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 1792 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL diode 1728 256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode 1792 256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL res 2496 112 R0
SYMATTR InstName R5
SYMATTR Value 200R
SYMBOL voltage 1248 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 0.7V
SYMATTR InstName V1
SYMBOL npn 2112 192 R270
SYMATTR InstName Q3
SYMBOL res 2016 112 R0
SYMATTR InstName R6
SYMATTR Value 5k
SYMBOL cap 2016 208 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL voltage -448 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 15
SYMATTR InstName V4
SYMBOL res 688 -128 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 0.01R
SYMBOL Comparators\\LT1011 1072 320 R0
SYMATTR InstName U3
SYMBOL res 1152 224 R0
SYMATTR InstName R9
SYMATTR Value 3.3k
SYMBOL res 704 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL cap 672 336 R0
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL voltage 896 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 3.5V
SYMATTR InstName V5
SYMBOL cap 1840 128 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL npn 816 528 M0
SYMATTR InstName Q2
SYMBOL res 944 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1k
TEXT -168 -224 Left 2 !.tran 0.5ms
TEXT -208 -312 Left 2 !.include 74hc.lib
TEXT 944 -360 Left 2 !K L1 L3 0.99
TEXT 728 -208 Left 2 ;Adding input R helps non start issue.
TEXT 1504 -248 Left 2 ;Must be careful. do not load or drive, so that comparator cannot pick\nout the current limit, because it's too fast. it's easy  to see timing go wrong.
TEXT 1480 464 Left 2 ;I think we need a free-running fixed oscillator. then within that\nwe trigger the ramps.  maybe and gate logic if needed.\nRather than trying to have the ramp trigger the oscillator time.
TEXT -440 568 Left 2 ;NOte that the RC charge reset provides the cold-start pulse. good.\nneed edge detect/ pulse generation for the start of the cycle.\nto reset the RC timer.\nneeds to be long enough to discharge.
