Version 4
SHEET 1 2932 904
WIRE 672 -80 672 -144
WIRE 304 -64 144 -64
WIRE 304 -32 304 -64
WIRE 768 0 672 0
WIRE 416 48 400 48
WIRE 432 48 416 48
WIRE 608 48 512 48
WIRE 1296 64 1248 64
WIRE -192 80 -272 80
WIRE 1424 80 1376 80
WIRE -272 96 -272 80
WIRE -192 96 -192 80
WIRE 1296 96 672 96
WIRE 432 112 400 112
WIRE 1776 128 1712 128
WIRE 1856 128 1776 128
WIRE 1984 128 1984 112
WIRE 1984 128 1856 128
WIRE 2032 128 1984 128
WIRE 2112 128 2032 128
WIRE 2512 128 2208 128
WIRE 1712 192 1536 192
WIRE 1808 192 1776 192
WIRE 768 208 752 208
WIRE 2160 208 2160 192
WIRE 2160 208 2032 208
WIRE 1040 240 896 240
WIRE 1168 256 1120 256
WIRE 1776 256 1712 256
WIRE 1856 256 1856 192
WIRE 1856 256 1776 256
WIRE 1936 256 1856 256
WIRE 432 272 432 112
WIRE 752 272 752 208
WIRE 752 272 432 272
WIRE 832 272 832 208
WIRE 1040 272 832 272
WIRE 1808 272 1808 192
WIRE 1808 272 1536 272
WIRE 304 352 304 192
WIRE 1168 352 1168 256
WIRE 1168 352 304 352
WIRE 144 384 144 -64
WIRE 1424 384 1424 80
WIRE 1424 384 144 384
WIRE 896 416 896 240
WIRE 1248 416 1248 64
WIRE 416 496 416 48
WIRE 416 496 160 496
WIRE 208 656 192 656
WIRE 544 656 400 656
WIRE 752 656 624 656
WIRE 160 688 160 496
WIRE 208 688 160 688
WIRE 192 832 192 656
WIRE 400 832 400 720
WIRE 400 832 192 832
WIRE 752 896 752 656
WIRE 752 896 304 896
FLAG -192 96 0
FLAG -272 0 VCC
FLAG -272 176 VEE
FLAG 672 176 0
FLAG 1312 128 0
FLAG 1328 32 VCC
FLAG 1328 128 VEE
FLAG 1424 0 VCC
FLAG 2512 208 0
FLAG 1248 496 0
FLAG 1936 256 0
FLAG 2032 272 0
FLAG -128 0 0
FLAG -128 -80 P15V
FLAG 672 -224 P15V
FLAG 1056 304 0
FLAG 1072 208 VCC
FLAG 1072 304 VEE
FLAG 1168 176 VCC
FLAG 832 336 0
FLAG 32 144 0
FLAG 32 0 VCC
FLAG 896 496 0
FLAG 208 80 0
FLAG 624 720 0
FLAG 208 48 0
FLAG 304 576 VCC
FLAG 304 800 VCC
SYMBOL voltage -272 -16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 5
SYMATTR InstName V2
SYMBOL voltage -272 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 36 39 Left 2
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL 74hc74 304 -32 R0
SYMATTR InstName U1
SYMBOL ind2 656 -96 R0
SYMATTR InstName L1
SYMATTR Value 200µ
SYMATTR Type ind
SYMBOL npn 608 0 R0
SYMATTR InstName Q1
SYMBOL res 656 80 R0
SYMATTR InstName R1
SYMATTR Value 0.7R
SYMBOL res 528 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 250R
SYMBOL ind2 1552 288 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L3
SYMATTR Value 200µ
SYMATTR Type ind
SYMBOL Comparators\\LT1011 1328 80 R0
SYMATTR InstName U2
SYMBOL res 1408 -16 R0
SYMATTR InstName R2
SYMATTR Value 3.3k
SYMBOL diode 1728 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 1792 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL diode 1728 256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode 1792 256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL res 2496 112 R0
SYMATTR InstName R5
SYMATTR Value 200R
SYMBOL voltage 1248 400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 0.7V
SYMATTR InstName V1
SYMBOL npn 2112 192 R270
SYMATTR InstName Q3
SYMBOL res 2016 112 R0
SYMATTR InstName R6
SYMATTR Value 5k
SYMBOL cap 2016 208 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL voltage -128 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 15
SYMATTR InstName V4
SYMBOL res 688 -128 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 0.01R
SYMBOL Comparators\\LT1011 1072 256 R0
SYMATTR InstName U3
SYMBOL res 1152 160 R0
SYMATTR InstName R9
SYMATTR Value 3.3k
SYMBOL res 848 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL cap 816 272 R0
SYMATTR InstName C3
SYMATTR Value 15n
SYMBOL cap 16 80 R0
SYMATTR InstName C4
SYMATTR Value 1µ
SYMBOL res 48 96 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL voltage 896 400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 48 40 Left 2
SYMATTR Value 2V
SYMATTR InstName V5
SYMBOL cap 1840 128 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL 74hc74 304 576 R0
SYMATTR InstName U4
SYMBOL res 640 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL cap 608 656 R0
SYMATTR InstName C5
SYMATTR Value 25n
TEXT -168 -224 Left 2 !.tran 0.5ms
TEXT -208 -312 Left 2 !.include 74hc.lib
TEXT 944 -360 Left 2 !K L1 L3 0.99
TEXT 728 -208 Left 2 ;Adding input R helps non start issue.
TEXT 1504 -248 Left 2 ;Must be careful. do not load or drive, so that comparator cannot pick\nout the current limit, because it's too fast. it's easy  to see timing go wrong.
TEXT 1480 464 Left 2 ;I think we need a free-running fixed oscillator. then within that\nwe trigger the ramps.  maybe and gate logic if needed.\nRather than trying to have the ramp trigger the oscillator time.
