Version 4
SHEET 1 1768 872
WIRE 544 -144 448 -144
WIRE 768 -144 640 -144
WIRE 352 -96 240 -96
WIRE -224 16 -320 16
WIRE -96 16 -144 16
WIRE 64 16 -32 16
WIRE 160 16 64 16
WIRE 352 16 352 -96
WIRE 352 16 240 16
WIRE 448 16 448 -144
WIRE 448 16 352 16
WIRE 480 16 448 16
WIRE 592 16 592 -80
WIRE 592 16 560 16
WIRE 672 16 592 16
WIRE 64 80 64 16
WIRE 352 112 352 16
WIRE 384 112 352 112
WIRE 672 112 672 16
WIRE 496 128 448 128
WIRE 624 128 576 128
WIRE 384 144 352 144
WIRE 672 224 672 208
WIRE 768 224 768 -144
WIRE 768 224 672 224
WIRE 352 240 352 144
WIRE 352 240 64 240
WIRE 64 256 64 240
WIRE 672 272 672 224
WIRE -224 304 -256 304
WIRE -112 320 -160 320
WIRE 16 320 -32 320
WIRE -224 336 -416 336
WIRE -416 352 -416 336
WIRE 672 384 672 336
WIRE -256 432 -256 304
WIRE 64 432 64 336
WIRE 64 432 -256 432
WIRE 1120 688 1008 688
FLAG 1120 688 0
FLAG 1008 768 VEE2
FLAG 1008 608 VCC2
FLAG 416 160 VEE2
FLAG 416 96 VCC2
FLAG -192 352 VEE2
FLAG -192 288 VCC2
FLAG -416 432 0
FLAG 64 512 0
FLAG -320 16 VCC2
FLAG 672 464 0
SYMBOL voltage 1008 672 R0
WINDOW 0 54 29 Left 2
WINDOW 3 50 56 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL res 656 368 R0
SYMATTR InstName RLOAD
SYMATTR Value 1k
SYMBOL res 256 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RSET
SYMATTR Value 1k
SYMBOL pmos 624 208 M180
SYMATTR InstName M1
SYMBOL voltage 1008 592 R0
WINDOW 0 54 29 Left 2
WINDOW 3 50 56 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL res 592 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 576 0 R90
WINDOW 0 -33 56 VBottom 2
WINDOW 3 -27 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 22k
SYMBOL pnp 640 -80 M270
SYMATTR InstName Q1
SYMBOL OpAmps\\ADA4625 416 64 R0
WINDOW 3 -43 178 Left 2
SYMATTR InstName U2
SYMBOL diode 656 272 R0
SYMATTR InstName D1
SYMBOL res 48 416 R0
SYMATTR InstName R5
SYMATTR Value 40k
SYMBOL res -16 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL OpAmps\\ADA4625 -192 256 R0
WINDOW 3 -56 196 Left 2
SYMATTR InstName U1
SYMBOL voltage -416 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 46 44 Left 2
WINDOW 0 38 16 Left 2
SYMATTR Value 7
SYMATTR InstName VREF
SYMBOL res 48 144 R0
WINDOW 0 -101 54 Left 2
WINDOW 3 -102 83 Left 2
SYMATTR InstName R7
SYMATTR Value 28.57k
SYMBOL nmos 16 240 R0
SYMATTR InstName M2
SYMBOL sw -128 16 M270
WINDOW 0 -70 130 Left 2
WINDOW 3 -72 106 Left 2
SYMATTR InstName S1
SYMBOL diode -96 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL sw 64 176 M180
WINDOW 0 56 75 Left 2
WINDOW 3 51 47 Left 2
SYMATTR InstName S2
SYMBOL res 256 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RSET1
SYMATTR Value 10k
TEXT 936 416 Left 2 !.tran 0.1
TEXT 872 -80 Left 2 ;K2002 resistor switch is high-side.\nwith a diode. so must be K - sensing. somehow.\n \nBUT - voltage across R7 + SW2 is constnt / fixed. \nSo RDS(on) SW2 is negligable.\n \n \nNo. k2002, kelvin taps right before the resistor.\n \n34401a. SW1. is in series with the current set resistor,\nand cotributes to RDS(on).
