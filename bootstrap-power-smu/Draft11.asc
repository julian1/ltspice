Version 4
SHEET 1 3400 1084
WIRE 624 -544 448 -544
WIRE 1232 -544 624 -544
WIRE 1328 -544 1232 -544
WIRE 448 -512 448 -544
WIRE 624 -464 512 -464
WIRE 560 -416 448 -416
WIRE 1232 -416 1232 -544
WIRE 624 -336 624 -368
WIRE 1008 -336 624 -336
WIRE 1184 -336 1072 -336
WIRE 1232 -272 1232 -320
WIRE 1232 -272 1184 -272
WIRE 1232 -208 1232 -272
WIRE 1328 -208 1296 -208
WIRE 1232 -160 1232 -208
WIRE 624 -80 624 -336
WIRE 1184 -80 624 -80
WIRE 448 -16 448 -416
WIRE 1232 -16 1232 -64
WIRE 1232 -16 1184 -16
WIRE 1232 16 1232 -16
WIRE 1328 16 1232 16
WIRE 1232 48 1232 16
WIRE 976 96 944 96
WIRE 1168 96 1088 96
WIRE 880 160 880 96
WIRE 1456 160 880 160
WIRE 624 176 624 -80
WIRE 672 176 624 176
WIRE 1088 176 1088 96
WIRE 1104 176 1088 176
WIRE 1200 176 1168 176
WIRE 880 208 880 160
WIRE 896 208 880 208
WIRE 976 224 976 96
WIRE 976 224 960 224
WIRE 1072 224 976 224
WIRE 1088 224 1088 176
WIRE 1088 224 1072 224
WIRE 1104 224 1088 224
WIRE 1200 224 1200 176
WIRE 1200 224 1184 224
WIRE 1232 224 1200 224
WIRE 1456 224 1456 160
WIRE 1456 224 1232 224
WIRE 1536 224 1456 224
WIRE 1552 224 1536 224
WIRE 1632 224 1552 224
WIRE 1648 224 1632 224
WIRE 256 240 160 240
WIRE 624 240 256 240
WIRE 672 240 624 240
WIRE 688 240 672 240
WIRE 896 240 688 240
WIRE 688 304 624 304
WIRE 1072 352 1072 224
WIRE 1168 352 1072 352
WIRE 1232 432 1232 400
WIRE 1328 432 1232 432
WIRE 1232 448 1232 432
WIRE 1232 448 1184 448
WIRE 2960 480 2896 480
WIRE 1232 496 1232 448
WIRE 624 512 624 304
WIRE 1184 512 624 512
WIRE 1888 528 1776 528
WIRE 1776 608 1776 528
WIRE 1792 608 1776 608
WIRE 1888 624 1888 528
WIRE 1888 624 1856 624
WIRE 1952 624 1888 624
WIRE 2304 624 1952 624
WIRE 2448 624 2384 624
WIRE 2560 624 2528 624
WIRE 3136 624 3120 624
WIRE 3216 624 3200 624
WIRE 1232 640 1232 592
WIRE 1344 640 1296 640
WIRE 1744 640 1712 640
WIRE 1792 640 1744 640
WIRE 2384 672 2384 624
WIRE 2400 672 2384 672
WIRE 2560 688 2464 688
WIRE 2592 688 2560 688
WIRE 2672 688 2592 688
WIRE 2816 688 2752 688
WIRE 2896 688 2896 480
WIRE 1232 704 1232 640
WIRE 1232 704 1184 704
WIRE 1952 704 1952 624
WIRE 2160 704 2064 704
WIRE 2400 704 2384 704
WIRE 2752 736 2752 688
WIRE 2768 736 2752 736
WIRE 1232 752 1232 704
WIRE 2064 752 2064 704
WIRE 2080 752 2064 752
WIRE 2928 752 2832 752
WIRE 2976 752 2928 752
WIRE 3040 752 2976 752
WIRE 3120 752 3120 624
WIRE 3136 752 3120 752
WIRE 624 768 624 512
WIRE 1056 768 624 768
WIRE 1184 768 1120 768
WIRE 2160 768 2160 704
WIRE 2160 768 2144 768
WIRE 2304 768 2160 768
WIRE 2384 768 2384 704
WIRE 2448 768 2384 768
WIRE 2560 768 2560 688
WIRE 2560 768 2528 768
WIRE 2768 768 2752 768
WIRE 3216 768 3216 624
WIRE 3216 768 3200 768
WIRE 3312 768 3216 768
WIRE 3344 768 3312 768
WIRE 2080 784 1952 784
WIRE 3136 784 3120 784
WIRE 624 816 624 768
WIRE 2672 832 2640 832
WIRE 2752 832 2752 768
WIRE 2816 832 2752 832
WIRE 2928 832 2928 752
WIRE 2928 832 2896 832
WIRE 3120 832 3120 784
WIRE 448 864 448 64
WIRE 560 864 448 864
WIRE 2384 880 2384 768
WIRE 2464 880 2384 880
WIRE 2560 880 2560 768
WIRE 2560 880 2528 880
WIRE 624 912 512 912
WIRE 2752 928 2752 832
WIRE 2832 928 2752 928
WIRE 2928 928 2928 832
WIRE 2928 928 2896 928
WIRE 448 992 448 960
WIRE 624 992 448 992
WIRE 1232 992 1232 848
WIRE 1232 992 624 992
WIRE 1344 992 1232 992
FLAG 1328 -464 0
FLAG 1648 304 0
FLAG 1328 16 FVCC
FLAG 1328 432 FVEE
FLAG 1536 -144 FVCC
FLAG 1536 -80 FVEE
FLAG 1536 160 FVCC
FLAG 1552 288 FVEE
FLAG 1328 -128 0
FLAG 1344 560 0
FLAG 1344 912 0
FLAG 928 192 FVCC
FLAG 928 256 FVEE
FLAG 1632 224 OUT
FLAG 1824 592 FVCC
FLAG 1824 656 FVEE
FLAG 1744 640 OUT
FLAG 1952 864 0
FLAG 2432 720 FVCC
FLAG 2432 656 FVEE
FLAG 2112 736 FVCC
FLAG 2112 800 FVEE
FLAG 2560 624 OUT
FLAG 2592 688 VFB
FLAG 3168 800 FVEE
FLAG 3168 736 FVCC
FLAG 3120 832 OUT
FLAG 3312 768 DRIVE
FLAG 2800 784 FVCC
FLAG 2800 720 FVEE
FLAG 2960 560 OUT
FLAG 2640 832 OUT
FLAG 2976 752 ERR
FLAG 256 240 DRIVE
SYMBOL pnp 560 -368 M180
SYMATTR InstName Q1
SYMATTR Value 2N3906
SYMBOL pnp 512 -416 R180
SYMATTR InstName Q3
SYMATTR Value 2N3906
SYMBOL res 608 -560 R0
SYMATTR InstName R6
SYMATTR Value 800R
SYMBOL voltage 1328 -560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 42 41 Left 2
SYMATTR Value 200
SYMATTR InstName V1
SYMBOL voltage 1344 896 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 36 39 Left 2
SYMATTR InstName V4
SYMATTR Value 200
SYMBOL res 432 -32 R0
SYMATTR InstName R8
SYMATTR Value 500k
SYMBOL zener 640 240 R180
WINDOW 0 24 64 Left 2
WINDOW 3 56 35 Left 2
SYMATTR InstName D1
SYMATTR Value Z19V
SYMBOL zener 640 304 R180
WINDOW 0 24 64 Left 2
WINDOW 3 54 30 Left 2
SYMATTR InstName D2
SYMATTR Value Z19V
SYMBOL npn 560 816 R0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL res 608 896 R0
SYMATTR InstName R1
SYMATTR Value 800R
SYMBOL npn 512 864 M0
SYMATTR InstName Q4
SYMATTR Value 2N3904
SYMBOL npn 1168 48 R0
SYMATTR InstName Q5
SYMATTR Value 2SC5200
SYMBOL pnp 1168 400 M180
WINDOW 3 85 0 Left 2
SYMATTR Value 2SA1943
SYMATTR InstName Q6
SYMBOL res 1216 128 R0
SYMATTR InstName R3
SYMATTR Value 0.5R
SYMBOL res 1216 208 R0
SYMATTR InstName R5
SYMATTR Value 0.5R
SYMBOL res 1200 208 R90
WINDOW 0 81 66 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 300R
SYMBOL nmos 1184 -160 R0
SYMATTR InstName M2
SYMATTR Value IRFP240
SYMBOL pmos 1184 592 M180
SYMATTR InstName M4
SYMATTR Value IRFP9240
SYMBOL OpAmps\\LT1006 928 160 R0
SYMATTR InstName U1
SYMBOL cap 656 176 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL cap 672 240 R0
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL cap 1168 160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -59 31 VTop 2
SYMATTR InstName C5
SYMATTR Value 1p
SYMBOL res 1632 208 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL cap 1520 -144 R0
SYMATTR InstName C7
SYMATTR Value 100n
SYMBOL diode 1552 224 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMBOL diode 1568 288 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMBOL diode 1200 -16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMBOL diode 1200 512 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMBOL diode 1296 -224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D9
SYMBOL voltage 1328 -224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 42 41 Left 2
SYMATTR Value 36
SYMATTR InstName V2
SYMBOL diode 1232 656 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D10
SYMBOL voltage 1344 544 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 42 41 Left 2
SYMATTR Value 36
SYMATTR InstName V3
SYMBOL nmos 1184 -416 R0
SYMATTR InstName M1
SYMATTR Value IRFP240
SYMBOL diode 1200 -272 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D11
SYMBOL diode 1008 -320 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D12
SYMBOL pmos 1184 848 M180
SYMATTR InstName M3
SYMATTR Value IRFP9240
SYMBOL diode 1200 768 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D13
SYMBOL diode 1120 752 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D14
SYMBOL OpAmps\\LT1006 1824 560 R0
SYMATTR InstName U2
SYMBOL res 1936 688 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 1936 768 R0
SYMATTR InstName R9
SYMATTR Value 90k
SYMBOL OpAmps\\LT1006 2112 704 R0
SYMATTR InstName U4
SYMBOL res 2400 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 25k
SYMBOL res 2544 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 25k
SYMBOL res 2400 752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 25k
SYMBOL res 2544 752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 25k
SYMBOL OpAmps\\LT1006 2432 752 M180
WINDOW 3 -41 -59 Left 2
SYMATTR InstName U3
SYMBOL OpAmps\\LT1006 3168 704 R0
SYMATTR InstName U5
SYMBOL res 3136 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL cap 3200 608 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL cap 944 80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -59 31 VTop 2
SYMATTR InstName C4
SYMATTR Value 1p
SYMBOL res 2768 672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 25k
SYMBOL res 2912 672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 25k
SYMBOL res 2768 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 25k
SYMBOL res 2912 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 25k
SYMBOL OpAmps\\LT1006 2800 816 M180
WINDOW 3 -41 -59 Left 2
SYMATTR InstName U6
SYMBOL voltage 2960 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 42 41 Left 2
SYMATTR Value 1
SYMATTR InstName V5
SYMBOL cap 2528 864 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 22p
SYMBOL cap 2896 912 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 22p
TEXT -104 -288 Left 2 !.tran 3ms
TEXT -136 -176 Left 2 !.include my.lib
TEXT -192 -88 Left 2 !.model Z19V ako:  BZX84C33VL bv=19
TEXT -136 -144 Left 2 !.include standard.bjt
TEXT 1648 744 Left 2 ;4W-HI
TEXT 2400 408 Left 2 ;see ad8479 for diff amp.
TEXT 1920 328 Left 2 ;Ok, this works for a short time. outputs -10V. in response to 1V set,
